# Football Colosseum

## Data Scraping Overview

This project involves scraping data from the [FBRER website](https://fbref.com/en/comps/) and converting it into various `.csv` and `.RData` files. The main script, `script.R`, is responsible for scraping and collecting the data, while additional scripts handle file conversions for further processing.
### Scripts Overview

1. **script.R** - This is the main data scraping script. It accesses the target website, retrieves the necessary data, and saves it as `.csv` files in the `/Data` directory. This script ensures the data is collected in a structured format suitable for conversion.

2. **AdvanceScript.R**, **AttackScript.R**, **DefenceScript.R**, **GoalKeepingScript.R** - These scripts process the `.csv` files generated by `script.R`. Each script converts specific `.csv` files into `.RData` files, as required for different analyses. This modular approach ensures each data set is available in the R environment in the desired format, organized by metric (e.g., Advanced, Attack, Defense, Goalkeeping).


### Usage Instructions

1. **Setup**: Ensure all necessary packages are installed. The scripts require various R packages (e.g., `rvest`, `httr`, `dplyr`) for web scraping, data manipulation, and processing.

   ```r
   install.packages(c("tidyverse", "rvest", "dplyr", "httr", "curl"))
   ```

2. **Data Scraping**:
   - Run `script.R` in the R environment to scrape data from the website. This step will save `.csv` files in the `/data` folder.

   ```r
   source("script.R")
   ```

3. **File Conversion**:
   - Execute each of the conversion scripts (`AdvanceScript.R`, `AttackScript.R`, `DefenceScript.R`, `GoalKeepingScript.R`) to generate `.RData` files from the `.csv` data. 

   ```r
   source("AdvanceScript.R")
   source("AttackScript.R")
   source("DefenceScript.R")
   source("GoalKeepingScript.R")
   ```

4. **Output**:
   - The `.csv` files created by `script.R` and the `.RData` files generated by the conversion scripts will be located in the `/Data` directory.

### Directory Structure
```
Data/
├── AdvanceScript.R          # Script for advanced metrics scraping
├── AttackScript.R           # Script for offensive metrics scraping
├── DefenceScript.R          # Script for defensive metrics scraping
├── GoalKeepingScript.R      # Script for goalkeeping metrics scraping
├── script.R                 # Main script integrating all scraping processes
├── README.md                # Project documentation
├───Bundesliga
│   ├───Bundesliga_20
│   │   ├───Player
│   │   └───Squad
│   ├───Bundesliga_21
│   │   ├───Player
│   │   └───Squad
│   ├───Bundesliga_22
│   │   ├───Player
│   │   └───Squad
│   ├───Bundesliga_23
│   │   ├───Player
│   │   └───Squad
│   └───Bundesliga_24
│       ├───Player
│       └───Squad
├───LaLiga
│   ├───LaLiga_20
│   │   ├───Player
│   │   └───Squad
│   ├───LaLiga_21
│   │   ├───Player
│   │   └───Squad
│   ├───LaLiga_22
│   │   ├───Player
│   │   └───Squad
│   ├───LaLiga_23
│   │   ├───Player
│   │   └───Squad
│   └───LaLiga_24
│       ├───Player
│       └───Squad
├───Ligue_1
│   ├───Ligue_1_20
│   │   ├───Player
│   │   └───Squad
│   ├───Ligue_1_21
│   │   ├───Player
│   │   └───Squad
│   ├───Ligue_1_22
│   │   ├───Player
│   │   └───Squad
│   ├───Ligue_1_23
│   │   ├───Player
│   │   └───Squad
│   └───Ligue_1_24
│       ├───Player
│       └───Squad
├───Player_Comparison_Data
│   ├───Advance
│   ├───Attack
│   ├───Defense
│   └───GoalKeeping
├───Premier_League
│   ├───Premier_League_20
│   │   ├───Player
│   │   └───Squad
│   ├───Premier_League_21
│   │   ├───Player
│   │   └───Squad
│   ├───Premier_League_22
│   │   ├───Player
│   │   └───Squad
│   ├───Premier_League_23
│   │   ├───Player
│   │   └───Squad
│   └───Premier_League_24
│       ├───Player
│       └───Squad
└───Serie_A
    ├───Serie_A_20
    │   ├───Player
    │   └───Squad
    ├───Serie_A_21
    │   ├───Player
    │   └───Squad
    ├───Serie_A_22
    │   ├───Player
    │   └───Squad
    ├───Serie_A_23
    │   ├───Player
    │   └───Squad
    └───Serie_A_24
        ├───Player
        └───Squad
```

### Notes

- **Data Sources**: Ensure the source URL in `script.R` is current to avoid scraping errors.
- **Error Handling**: Each script includes basic error-handling mechanisms to skip or log failed extractions for later review.
---

Let’s analyze `AttackScript.R` and create a combined markdown template based on the provided structure. I'll review this file to see how it processes the `.csv` files generated by the main script. Then, I'll incorporate this analysis into the report outline.

Let’s start by examining the content of `AttackScript.R`.

The `AttackScript.R` file processes `.csv` files to extract key metrics relevant to "attack" performance and save them as `.RData` files for further analysis. Here’s a structured breakdown of `AttackScript.R` that we can incorporate into the report:

<br>

# Script Details

### 1. `script.R` - Main Data Scraping Script

   - **Objective**: Scrapes data from FBRER for five major European leagues (e.g., Bundesliga, La Liga) and saves the data in structured `.csv` files.
   - **Steps**:
      1. **Loading Required Packages**: Utilizes `tidyverse`, `rvest`, `dplyr`, `httr`, and `curl`.
      2. **Directory Setup**: Establishes directories based on league and season to organize the scraped data.
      3. **Data Extraction**: Loops through seasons, sends HTTP requests to retrieve HTML content, and extracts tables for each league-season combination.
      4. **Data Cleaning and Saving**: Cleans and saves the tables as `.csv` files.

### 2. `AttackScript.R` - Attack Metric Processing

   - **Objective**: Processes `.csv` files to extract and structure attacking metrics, such as goals, assists, shot accuracy, and shot-creating actions, saving the data in `.RData` format for advanced analytics.
   - **Steps**:
      1. **Loading Packages**: Uses `dplyr` for data manipulation.
      2. **Directory and File Setup**: Defines helper functions to locate player data files across leagues and seasons.
      3. **Metric Selection**: Selects columns related to attacking performance, such as "Goals+Assists," "Shots on Target Percentage," and "Shot Creating Actions."
      4. **Data Aggregation**: Iterates over leagues and seasons, reads each `.csv` file, selects relevant columns, and appends them to a combined data frame.
      5. **Saving in `.RData` Format**: The combined data frame is saved as an `.RData` file, allowing for fast loading and compatibility within the R environment.

### 3. **Additional Metric Scripts** (`AdvanceScript.R`, `DefenceScript.R`, `GoalKeepingScript.R`)

   - **Objective**: Similar to `AttackScript.R`, these scripts handle metrics specific to other aspects of performance, ensuring that each data set is saved in `.RData` format.
   - **Functionality**:
      - **AdvanceScript.R**: Focuses on advanced metrics such as progressive passes, ball carries, and dribbles.
      - **DefenceScript.R**: Concentrates on defensive metrics like tackles, interceptions, and clearances.
      - **GoalKeepingScript.R**: Handles goalkeeping stats, such as saves, clean sheets, and save percentage.
   - **Approach**: Each script follows the same general process of reading `.csv` files, selecting relevant columns, and saving the processed data as `.RData`.

---